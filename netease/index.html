<!DOCTYPE html>
 <html lang=en style>
  <head>
  <meta charset="utf-8">
  <meta http-equiv=X-UA-Compatible content="IE=edge">
  <meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta content="网易云,歌单封面,专辑封面,封面下载" name="keywords">
  <title>网易云音乐在线下载封面 | 封面 在线下载 - biubiu.dev</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js" crossorigin="anonymous"></script>
  <style>
    html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body{margin:0}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}.form-control{display:block;padding:6px 12px;font-size:14px;line-height:1.42857143;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-control::-webkit-input-placeholder{color:#999}textarea.form-control{height:auto}.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;text-decoration:none}.btn.active,.btn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default.active,.btn-default.focus,.btn-default:active,.btn-default:focus,.btn-default:hover,.open>.dropdown-toggle.btn-default{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default.active,.btn-default:active,.open>.dropdown-toggle.btn-default{background-image:none}.btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}.btn-primary.active,.btn-primary.focus,.btn-primary:active,.btn-primary:focus,.btn-primary:hover,.open>.dropdown-toggle.btn-primary{color:#fff;background-color:#286090;border-color:#204d74}.btn-primary.active,.btn-primary:active,.open>.dropdown-toggle.btn-primary{background-image:none}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info.active,.btn-info.focus,.btn-info:active,.btn-info:focus,.btn-info:hover,.open>.dropdown-toggle.btn-info{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info.active,.btn-info:active,.open>.dropdown-toggle.btn-info{background-image:none}.btn-link{font-weight:400;color:#337ab7;border-radius:0}.btn-link,.btn-link:active{background-color:transparent;-webkit-box-shadow:none;box-shadow:none}.btn-link,.btn-link:active,.btn-link:focus,.btn-link:hover{border-color:transparent}.btn-link:focus,.btn-link:hover{color:#23527c;text-decoration:underline;background-color:transparent}[data-toggle=buttons]>.btn input[type=checkbox]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.breadcrumb{padding:8px 15px;margin-bottom:20px;list-style:none;background-color:#f5f5f5;border-radius:4px}.breadcrumb>li{display:inline-block}.breadcrumb>li+li:before{padding:0 5px;color:#ccc;content:"/ "}.breadcrumb>.active{color:#777}.label{display:inline;padding:.2em .6em .3em;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;border-radius:.25em}.label:empty{display:none}.label-success{background-color:#5cb85c}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert-success{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.05);box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.btn-group-vertical>.btn-group:after,.btn-group-vertical>.btn-group:before,.btn-toolbar:after,.btn-toolbar:before,.clearfix:after,.clearfix:before,.container-fluid:after,.container-fluid:before,.container:after,.container:before,.dl-horizontal dd:after,.dl-horizontal dd:before,.form-horizontal .form-group:after,.form-horizontal .form-group:before,.modal-footer:after,.modal-footer:before,.nav:after,.nav:before,.navbar-collapse:after,.navbar-collapse:before,.navbar-header:after,.navbar-header:before,.navbar:after,.navbar:before,.pager:after,.pager:before,.panel-body:after,.panel-body:before,.row:after,.row:before{display:table;content:" "}.btn-group-vertical>.btn-group:after,.btn-toolbar:after,.clearfix:after,.container-fluid:after,.container:after,.dl-horizontal dd:after,.form-horizontal .form-group:after,.modal-footer:after,.nav:after,.navbar-collapse:after,.navbar-header:after,.navbar:after,.pager:after,.panel-body:after,.row:after{clear:both}@-ms-viewport{width:device-width}body{padding-top:40px;padding-bottom:40px;background-color:#f5f5f5;font-family:"PingFang SC","Helvetica Neue","Helvetica","Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif}a,input,button{outline:none!important}a:focus,a:hover,.btn-link:focus,.btn-link:hover{text-decoration:underline;text-underline-position:under}.main{max-width:950px;padding:19px 29px 29px;margin:0 auto 20px;background-color:#fff;border:1px solid #e5e5e5;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:0 1px 2px rgba(0,0,0,.05);box-shadow:0 1px 2px rgba(0,0,0,.05)}small{color:#777}.l{float:left}.r{float:right}.ml6{margin-left:6px}.label-site{font-size:14px;vertical-align:middle;margin-right:6px}.breadcrumb>li+li::before{content:"| "}.text{width:100%}.btn-code{padding:6px 16px}@keyframes immersive-translate-loading-animation{from{transform:rotate(0deg,0deg,0deg)}to{transform:rotate(359deg,0deg,0deg)}}.sf-hidden{display:none!important}
    .toast-center {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #3c763d;
      color: #fff;
    }
  </style>
</head>
<body>
    <div class="container">
        <div class="main">
            <a href="https://biubiu.dev/" style="text-decoration: none;">
                <span class="label label-success label-site">
                    biubiu.dev
                </span>
            </a>
                歌单封面下载
            </h3>
            <ol class="breadcrumb">
                <li class="active">
                    Cover
                </li>
                <li>
                    最好用的 歌单封面 下载工具 - 现已支持网易云音乐、QQ音乐、酷狗音乐
                </li>
            </ol>
            <h5>
                请输入从云音乐 分享 的链接：
            </h5>
            <textarea class="form-control text" cols="80" id="text" name="text" placeholder="" rows="6"></textarea>
            <div style="margin:10px 0">
                <button class="btn btn-primary btn-code" id="parse">
                    解析 (Parse)
                </button>
            </div>
            <h5>
                解析的结果：
            </h5>
            <div id="error" style="display: none; color: red;"></div>
            <div style="margin:10px 0;">
              <img height="115" class="img" src="" />
            </div>
            <div class="alert alert-success" id="alert" style="margin:10px 0; border: 1px solid silver; visibility: hidden;">
                解析完毕。图片右键另存或者长按另存即可
                <!-- <a data-clipboard-target="#result" data-placement="bottom" data-toggle="tooltip" data-trigger="manual" id="download" style="cursor:pointer" title="下载成功">
                    下载
                </a> -->
                <a style="margin-left: 15px;cursor:pointer;" data-placement="bottom" data-toggle="tooltip" data-trigger="manual" id="copy"  title="复制成功">
                    复制链接
                </a>
            </div>
            <hr>
                <div style="text-align:right">
                    <div class="l" style="color:#888;line-height:34px">
                        <span>
                            @biubiu.dev
                        </span>
                        <div style="visibility: hidden;height:30px;">
                        </div>
                    </div>
                </div>
            </hr>
        </div>
    </div>
</body>
<script src="/baidu/tongji.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var imgElement = $('.img');
    var error = $('#error');
    var alert = $('.alert');

    $('#parse').click(function() {
        var data = {};
        data.text = $('#text').val();
        var pattern = /(http|https):\/\//;
        if (!pattern.test(data.text)) {
            error.text('请输入分享的复制链接');
            error.css('display', 'block');
            return;
        }

        $('body').addClass('disabled-dom');

        toastr.options = {
            closeButton: false,
            progressBar: true,
            timeOut: 0,
            extendedTimeOut: 0,
            preventDuplicates: true,
            positionClass: 'toast-center'
        };
        toastr.info('正在解析中...');

        $.ajax({
            type: 'POST',
            url: 'http://[2408:871a:b000:2::f7cc]:3000/api/net-ease/cover',
            contentType: 'application/json',
            data: JSON.stringify(data),
            success: function(response) {
                console.log(response);
                toastr.clear(); // 关闭 toast 提示框
                $('body').removeClass('disabled-dom');
                if (response.code) {
                    error.text(response.message);
                    error.css('display', 'block');
                    return;
                }
                var downloadUrl = response.data.url;
                imgElement.attr('src', downloadUrl);

                error.text('');
                error.css('display', 'none');
                alert.css('visibility', 'visible');
            },
            error: function(xhr, status, error) {
                console.error('Error:', status);
                toastr.clear();
                toastr.error('解析失败，请重试');
                $('body').removeClass('disabled-dom');

                error.text('解析异常');
                error.css('display', 'block');
            }
        });
    });

    $('#download').on('click', function() {
        var imgElement = document.querySelector('.img');
        var downloadUrl = imgElement.src;

        if (downloadUrl.startsWith('data:image/')) {
            var base64Image = downloadUrl.split(',')[1]; 
            var blob = base64ToBlob(base64Image);
            downloadBlobAsFile(blob, 'cover.jpg');
        } else {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', downloadUrl, true);
            xhr.responseType = 'blob';
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var blob = xhr.response;
                        downloadBlobAsFile(blob, 'cover.jpg');
                    } else {
                        console.error('Error:', xhr.statusText);
                    }
                }
            };
            xhr.send();
        }
    });

    function base64ToBlob(base64) {
        var binary = atob(base64);
        var array = [];
        for (var i = 0; i < binary.length; i++) {
            array.push(binary.charCodeAt(i));
        }
        return new Blob([new Uint8Array(array)], { type: 'image/jpeg' });
    }

    function downloadBlobAsFile(blob, filename) {
        var link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = filename;
        link.click();
        URL.revokeObjectURL(link.href);
    }


    var clipboard = new ClipboardJS('#copy', {
            text: function() {
                return $('.img').attr('src');
            }
        });

        clipboard.on('success', function(e) {
            console.log('复制成功:', e.text);
        });

        clipboard.on('error', function(e) {
            console.error('复制失败:', e.text);
        });
});
</script>
</html
